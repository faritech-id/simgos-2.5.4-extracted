USE `master`;

-- Dumping structure for function master.getAturanPakai
DROP FUNCTION IF EXISTS `getAturanPakai`;
DELIMITER //
CREATE FUNCTION `getAturanPakai`(
	`PKODE` VARCHAR(250)
) RETURNS varchar(250) CHARSET latin1
    DETERMINISTIC
BEGIN
	DECLARE VATURAN_PAKAI VARCHAR(250);
	
	SELECT DESKRIPSI INTO VATURAN_PAKAI
	  FROM referensi ref 
	WHERE ref.JENIS = 41 
	  AND CONCAT('',ref.ID,'') = PKODE;
	 
	IF VATURAN_PAKAI IS NULL THEN
		SET VATURAN_PAKAI = PKODE;
	END IF;

	RETURN VATURAN_PAKAI;
END//
DELIMITER ;