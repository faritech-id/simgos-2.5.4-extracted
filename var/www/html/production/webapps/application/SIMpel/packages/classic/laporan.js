Ext.define("laporan.ButtonDoc",{extend:"Ext.button.Segmented",xtype:"laporan-button-doc",width:220,items:[{text:"Html",doc:{TYPE:"Html",EXT:"html"}},{text:"Word",doc:{TYPE:"Word",EXT:"doc"}},{text:"Excel",doc:{TYPE:"Excel",EXT:"xls"}},{text:"Pdf",pressed:true,doc:{TYPE:"Pdf",EXT:"pdf"}}],getDocType:function(){var d=this,c=d.down("[pressed=true]");return c.doc}});Ext.define("laporan.DataView",{extend:"Ext.view.View",alias:"widget.laporan-data-view",viewModel:{stores:{store:{type:"store"}}},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this,a=b.getViewModel().get("store");if(a){b.setLoading(true);a.removeAll();a.load(function(){b.setLoading(false)})}}});Ext.define("laporan.Filter",{extend:"com.Form",xtype:"laporan-filter",layout:{type:"vbox",align:"stretch"},defaultType:"datefield",minHeight:90,initComponent:function(){var a=this;a.callParent();a.add([{reference:"awal",emptyText:"[Periode Awal]",fieldLabel:"Periode Awal",format:"d-m-Y",value:a.getSysdate()},{reference:"akhir",emptyText:"[Periode Akhir]",fieldLabel:"Periode Akhir",format:"d-m-Y",value:a.getSysdate()}])},getParameters:function(){var d=this.down("[reference=awal]").getValue(),c=this.down("[reference=akhir]").getValue();return{PARAMETER:{TGLAWAL:Ext.Date.format(d,"Y-m-d")+" 00:00:00",TGLAKHIR:Ext.Date.format(c,"Y-m-d")+" 23:59:59"}}}});Ext.define("laporan.Workspace",{extend:"com.Form",xtype:"workspace-laporan",controller:"workspace-laporan",viewModel:{stores:{store:{type:"jenis-laporan-store",queryParams:{LEVEL:1}}}},layout:"fit",bodyPadding:0,items:[{xtype:"com-form",ui:"panel-black",title:"Laporan",titleFieldConfig:{},fullscreenEnabled:true,menuConfig:{enabled:true,width:257,buttonConfig:{}},fullscreenConfig:{},header:{items:[{}]}}],load:function(a){var f=this,d=this.down("com-form"),g=[],c=f.getViewModel(),h=f.app.xpriv,b=c.get("store");if(b){f.setLoading(true);b.doAfterLoad=function(k,j,l,i){if(l){if(Ext.isArray(j)){j.forEach(function(n){if(h(n.get("MODULE",true))){var m={text:n.get("DESKRIPSI"),leaf:true,className:n.get("NAMA_KLAS"),idClassName:f.replaceAll(n.get("NAMA_KLAS"),".","_"),options:{listeners:{requestreport:"onRequertReport"}}};g.push(m)}})}}d.setMenus(g);f.setLoading(false)};b.removeAll();b.load()}}});Ext.define("laporan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan",onRequertReport:function(g,d,f){this.getView().fireEvent("requestreport",g,d,f)}});Ext.define("laporan.inventory.DataView",{extend:"Ext.view.View",alias:"widget.inventory-data-view",viewModel:{type:"inventorymodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.inventory.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.inventorymodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}});Ext.define("laporan.inventory.Workspace",{extend:"com.Form",xtype:"workspace-laporan-inventory",controller:"workspace-laporan-inventory",viewModel:{stores:{store:{type:"barang-store"}}},layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:3},split:true,border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",reference:"carabayarref",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]"},{xtype:"fieldset",title:"Filter Tambahan",collapsible:true,collapsed:true,defaults:{width:"99%",margin:"2.2.2.2"},defaultType:"kategori-combo",items:[{params:{JENIS:1,STATUS:1},allowBlank:true,reference:"jenisinventory",nextcombo:"jeniskategori",emptyText:"[ Jenis Inventory ]",listeners:{select:"onSelectKategori",blur:"onBlurKategori"}},{reference:"jeniskategori",allowBlank:true,nextcombo:"kategoribarang",emptyText:"[Jenis Kategori Barang]",params:{JENIS:2,STATUS:1},listeners:{select:"onSelectKategori"}},{params:{JENIS:3,STATUS:1},allowBlank:true,reference:"kategoribarang",emptyText:"[ Kategori Barang ]"},{xtype:"referensi-combo",queryMode:"local",displayField:"DESKRIPSI",reference:"jenisgenerik",valueField:"ID",emptyText:"[ Jenis Generik ]",params:{STATUS:1,JENIS:174},firstLoad:true},{xtype:"referensi-combo",name:"FORMULARIUM",queryMode:"local",displayField:"DESKRIPSI",reference:"jenisformularium",valueField:"ID",emptyText:"[ Formularium ]",params:{STATUS:1,JENIS:176},firstLoad:true},{xtype:"referensi-combo",name:"PENGGOLONGAN",queryMode:"local",displayField:"DESKRIPSI",reference:"jenispenggolonganbarang",valueField:"ID",emptyText:"[ Penggolongan Barang ]",params:{STATUS:1,JENIS:149},firstLoad:true}]},{xtype:"barang-combo-master",reference:"namabarang",emptyText:"[ Nama Barang ]",valueField:"ID"},{xtype:"checkboxfield",hideLabel:true,margin:"0 6 0 0",inputValue:"1",reference:"cekaktif",uncheckedValue:"0",boxLabel:"Aktif",listeners:{change:"onLoad"}},{xtype:"referensi-combo",reference:"jenisKunjungan",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelectRuangan"}},{xtype:"ruangan-tree",reference:"treeRuangan",flex:1},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}},border:false,reference:"inventoryView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.inventory.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-inventory",onAfterRender:function(){var b=this,a=b.getReferences();a.inventoryView.load()},onFocusEnter:function(a,b){if(b.getKey()===b.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(d,c){var b=this,a=b.getReferences();a.treeRuangan.setParams({JENIS_KUNJUNGAN:c.get("ID")});a.treeRuangan.loadStore()},onSelectKategori:function(b,d){var c=this,a=c.getView(),f=a.down("[reference = "+b.nextcombo+"]");f.setQueryParams({ID:d.get("ID")});f.load()},onSelectReport:function(o,m){var c=this.getReferences(),g=c.filter.getParameters(),n=c.carabayarref.getSelection()?c.carabayarref.getSelection().get("ID"):"0",h=c.jeniskategori.getSelection()?c.jeniskategori.getSelection().get("ID"):"0",i=c.jenisinventory.getSelection()?c.jenisinventory.getSelection().get("ID"):"0",j=c.kategoribarang.getSelection()?c.kategoribarang.getSelection().get("ID"):"0",l=c.namabarang.getSelection()?c.namabarang.getSelection().get("ID"):"0",q=c.jenisgenerik.getSelection()?c.jenisgenerik.getSelection().get("ID"):"0",f=c.jenispenggolonganbarang.getSelection()?c.jenispenggolonganbarang.getSelection().get("ID"):"0",k=c.jenisformularium.getSelection()?c.jenisformularium.getSelection().get("ID"):"0",s=c.jenisKunjungan.getSelection()?c.jenisKunjungan.getSelection().get("ID"):"0",b=c.treeRuangan.getSelection().length>0?c.treeRuangan.getSelection()[0].get("ID"):"0",r=Ext.JSON.decode(m.get("REPORT_PARAMS")),p=c.doctype.getDocType();g.PARAMETER.CARABAYAR=n;g.PARAMETER.KATEGORI=h;g.PARAMETER.JENISINVENTORY=i;g.PARAMETER.KATEGORIBARANG=j;g.PARAMETER.JENISKATEGORI=h;g.PARAMETER.BARANG=l;g.PARAMETER.JENISGENERIK=q;g.PARAMETER.PENGGOLONGAN=f;g.PARAMETER.JENISFORMULARIUM=k;g.PARAMETER.RUANGAN=b;g.PARAMETER.LAPORAN=s;r=Ext.apply(r,g);r=Ext.apply(r,p);r.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",m.get("DESKRIPSI"),r,true);c.inventoryView.deselect(m)},onLoad:function(){var d=this,c=d.getReferences(),a=(c.cekaktif.getValue())?1:0,b=c.jenisbarang.getStore();b.setQueryParams({STATUS:a});b.load()}});Ext.define("laporan.jasapelayanan.DataView",{extend:"Ext.view.View",alias:"widget.jasapelayanan-data-view",viewModel:{type:"jasapelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.jasapelayanan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.jasapelayananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}});Ext.define("laporan.jasapelayanan.Workspace",{extend:"com.Form",xtype:"workspace-laporan-jasapelayanan",controller:"workspace-laporan-jasapelayanan",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeJasaPelayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}},border:false,reference:"JasaPelayananView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.jasapelayanan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-jasapelayanan",onAfterRender:function(){var b=this.getReferences();b.JasaPelayananView.load();b.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeJasaPelayanan.loadStore()},onSelectReport:function(m,t,n){var q=this.getReferences(),w=q.filter.getParameters(),p=q.ruanganref.getSelection()?q.ruanganref.getSelection().get("ID"):"0",r=q.carabayar.getSelection()?q.carabayar.getSelection().get("ID"):"0",v=q.dokterref.getSelection()?q.dokterref.getSelection().get("ID"):"0",s=q.treeJasaPelayanan.getSelection().length>0?q.treeJasaPelayanan.getSelection()[0].get("ID"):"1",u=Ext.JSON.decode(t.get("REPORT_PARAMS")),o=q.doctype.getDocType(),l={};w.PARAMETER.RUANGAN=s;w.PARAMETER.LAPORAN=p;w.PARAMETER.CARABAYAR=r;w.PARAMETER.DOKTER=v;l=Ext.apply(u.PARAMETER,w.PARAMETER);u.PARAMETER=l;u=Ext.apply(u,o);u.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",t.get("DESKRIPSI"),u,true);q.JasaPelayananView.deselect(n)}});Ext.define("laporan.kegiatanrird.DataView",{extend:"Ext.view.View",alias:"widget.kegiatanrird-data-view",viewModel:{type:"kegiatanrirdmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.kegiatanrird.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.kegiatanrirdmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}});Ext.define("laporan.kegiatanrird.Workspace",{extend:"com.Form",xtype:"workspace-laporan-kegiatanrird",controller:"workspace-laporan-kegiatanrird",viewModel:{stores:{diagnosastore:{type:"diagnosa-store"}}},layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(f,g,a){Ext.Array.each(f,function(b){if(b.get("ID")==0||b.get("ID")==8||b.get("ID")==11||b.get("ID")==7||b.get("ID")==10||b.get("ID")==12||b.get("ID")==6||b.get("ID")==4||b.get("ID")==9||b.get("ID")==5||b.get("ID")==1){a.remove(b)}})}},{xtype:"ruangan-tree",reference:"treekegiatanrird",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}},border:false,reference:"kegiatanrirdView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.kegiatanrird.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-kegiatanrird",onAfterRender:function(){var b=this.getReferences();b.kegiatanrirdView.load();b.treekegiatanrird.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treekegiatanrird.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treekegiatanrird.loadStore()},onSelectReport:function(d,k,g){var a=this.getReferences(),b=a.filter.getParameters(),l=a.carabayarref.getSelection()?a.carabayarref.getSelection().get("ID"):"0",h=a.carakeluarrref.getSelection()?a.carakeluarrref.getSelection().get("ID"):"0",f=a.ruanganref.getSelection()?a.ruanganref.getSelection().get("ID"):"0",n=a.treekegiatanrird.getSelection().length>0?a.treekegiatanrird.getSelection()[0].get("ID"):"0",o=Ext.JSON.decode(k.get("REPORT_PARAMS")),m=a.doctype.getDocType();b.PARAMETER.CARABAYAR=l;b.PARAMETER.CARAKELUAR=h;b.PARAMETER.LAPORAN=f;b.PARAMETER.RUANGAN=n;o=Ext.apply(o,b);o=Ext.apply(o,m);o.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",k.get("DESKRIPSI"),o,true);a.kegiatanrirdView.deselect(g)}});Ext.define("laporan.kinerja.dokterdanperawat.DataView",{extend:"Ext.view.View",alias:"widget.laporan-kinerja-dokterdanperawat-view",viewModel:{type:"laporan-kinerja-dokterdanperawat-model"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.kinerja.dokterdanperawat.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.laporan-kinerja-dokterdanperawat-model",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"21",STATUS:1}}}});Ext.define("laporan.kinerja.dokterdanperawat.Workspace",{extend:"com.Form",xtype:"laporan-kinerja-dokterdanperawat-workspace",controller:"laporan-kinerja-dokterdanperawat-workspace",viewModel:{stores:{bpjspoliStore:{type:"antrian-polibpjs-store",autoLoad:true},subSpesialistikPenjaminStore:{type:"master-penjamin-subspesialistik-store"}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var a=this;a.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:3},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",width:150,name:"JENIS",reference:"profesi",params:{JENIS:36,STATUS:1},firstLoad:true,allowBlank:false,emptyText:"[ PROFESI ]",editable:false,listeners:{select:"onSelectProfesi"}},{xtype:"combobox",bind:{store:"{bpjspoliStore}"},reference:"ksmcombo",queryParam:"QUERY",queryMode:"remote",displayField:"KODE",valueField:"KODE",emptyText:"[ KSM ]",tpl:new Ext.XTemplate('<tpl for=".">','<div class="x-boundlist-item" style="font-size: 12px; line-height: 15px; padding: 3px 10px">','<div style="font-weight: bold; white-space:normal !important;">[ {KDPOLI} ] - {NMPOLI}</div>',"</div>","</tpl>",{}),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"[ {KDPOLI} ] - {NMPOLI}","</tpl>"),listeners:{select:"onselectKSM"}},{xtype:"combobox",emptyText:"[ SUB SPESIALIS / SUB SPESIALIS ]",bind:{store:"{subSpesialistikPenjaminStore}"},reference:"subspesialistik",displayField:"ID",valueField:"ID",tpl:new Ext.XTemplate('<tpl for=".">','<div class="x-boundlist-item" style="font-size: 12px; line-height: 15px; padding: 3px 10px">','<div style="font-weight: bold; white-space:normal !important;">{[this.getSupSpesialistik(values)]}</div>',"</div>","</tpl>",{getSupSpesialistik:function(f){var d=f.REFERENSI?f.REFERENSI:null,c=d?(d.SUB_SPESIALIS_RS?d.SUB_SPESIALIS_RS.DESKRIPSI:""):"";return c}}),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{[this.getSupSpesialistik(values)]}","</tpl>",{getSupSpesialistik:function(f){var d=f.REFERENSI?f.REFERENSI:null,c=d?(d.SUB_SPESIALIS_RS?d.SUB_SPESIALIS_RS.DESKRIPSI:""):"";return c}}),listeners:{select:"onSelectSP"}},{xtype:"pegawai-combo",name:"PEGAWAI",reference:"cmbpegawai",emptyText:"[ PEGAWAI ]",params:{STATUS:1}},{xtype:"referensi-combo",reference:"jenisKunjungan",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelectRuangan"}},{xtype:"ruangan-tree",reference:"treeRuangan",flex:1},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"21",STATUS:1}}}},border:false,reference:"detaillaporanview",listeners:{select:"onSelectReport"}}];a.callParent();var b=a.down("[reference = treeRuangan]");b.doAfterLoad=function(d,f,g,c){if(Ext.isArray(f)){(new Ext.util.DelayedTask(function(){d.expandNode(f[0])})).delay(100)}}},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.kinerja.dokterdanperawat.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.laporan-kinerja-dokterdanperawat-workspace",init:function(){var g=this,b=g.getView(),f=g.getReferences(),d=b.down("referensi-combo"),a=b.app.pegawai.get("PROFESI"),c=g.getViewModel(),i=c.get("bpjspoliStore"),h=c.get("subSpesialistikPenjaminStore");if(a==4){f.cmbpegawai.setQueryParams({NIP:b.app.usrNIP});f.cmbpegawai.load({callback:function(k,j,l){if(l){if(k.length>0){f.cmbpegawai.select(k[0]);h.removeAll();h.setQueryParams({SUB_SPESIALIS_RS:k[0].get("SMF")});h.load({callback:function(n,m,o){if(o){if(n.length>0){f.subspesialistik.select(n[0]);i.removeAll();i.setQueryParams({KDSUBSPESIALIS:n[0].get("SUB_SPESIALIS_PENJAMIN")});i.load({callback:function(q,p,r){if(r){if(q.length>0){f.ksmcombo.select(q[0])}}delete i.queryParams.NIP}})}}delete h.queryParams.NIP}})}}delete f.cmbpegawai.params.NIP}});d.setValue(a);d.setReadOnly(true);f.cmbpegawai.setReadOnly(true);f.ksmcombo.setReadOnly(true);f.subspesialistik.setReadOnly(true)}},onAfterRender:function(){var b=this,a=b.getReferences();a.detaillaporanview.load()},onSelectProfesi:function(b,f){var d=this,a=d.getView(),c=a.down("pegawai-combo");c.clearQueryParams();c.setQueryParams({STATUS:1,PROFESI:f.get("ID")})},onselectKSM:function(a,f){var c=this,b=c.getViewModel(),d=b.get("subSpesialistikPenjaminStore");d.removeAll();d.setQueryParams({SUB_SPESIALIS_PENJAMIN:f.get("KDSUBSPESIALIS"),STATUS:1});d.load()},onSelectSP:function(b,f){var d=this,a=d.getView(),c=a.down("pegawai-combo");c.setQueryParams({STATUS:1,SMF:f.get("SUB_SPESIALIS_RS")})},onSelectRuangan:function(d,c){var b=this,a=b.getReferences();a.treeRuangan.setParams({JENIS_KUNJUNGAN:c.get("ID")});a.treeRuangan.loadStore()},onSelectReport:function(l,i){var c=this.getReferences(),h=c.filter.getParameters(),j=c.ksmcombo.getSelection()?c.ksmcombo.getSelection().get("KODE"):"",g=c.subspesialistik.getSelection()?c.subspesialistik.getSelection().get("ID"):"",k=c.profesi.getSelection()?c.profesi.getSelection().get("ID"):"",f=c.cmbpegawai.getSelection()?c.cmbpegawai.getSelection().get("ID"):"",o=c.jenisKunjungan.getSelection()?c.jenisKunjungan.getSelection().get("ID"):"0",b=c.treeRuangan.getSelection().length>0?c.treeRuangan.getSelection()[0].get("ID"):"0",n=Ext.JSON.decode(i.get("REPORT_PARAMS")),m=c.doctype.getDocType();h.PARAMETER.KSM=j;h.PARAMETER.SUBSPESIALIS=g;h.PARAMETER.RUANGAN=b;h.PARAMETER.JENISRUANGAN=o;h.PARAMETER.PROFESI=k;h.PARAMETER.PEGAWAI=f;n=Ext.apply(n,h);n=Ext.apply(n,m);n.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",i.get("DESKRIPSI"),n,true);c.detaillaporanview.deselect(i)}});Ext.define("laporan.kunjungan.DataView",{extend:"Ext.view.View",alias:"widget.kunjungan-data-view",viewModel:{type:"kunjunganmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.kunjungan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.kunjunganmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}});Ext.define("laporan.kunjungan.Workspace",{extend:"com.Form",xtype:"workspace-laporan-kunjungan",controller:"workspace-laporan-kunjungan",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(b,d,a){Ext.Array.each(b,function(c){if(c.get("ID")==0){a.remove(c)}})}},{xtype:"ruangan-tree",reference:"treeKunjungan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}},border:false,reference:"kunjunganView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.kunjungan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-kunjungan",onAfterRender:function(){var b=this.getReferences();b.kunjunganView.load();b.treeKunjungan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeKunjungan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeKunjungan.loadStore()},onSelectReport:function(k,r,l){var o=this.getReferences(),t=o.filter.getParameters(),p=o.carabayar.getSelection()?o.carabayar.getSelection().get("ID"):"0",n=o.ruanganref.getSelection()?o.ruanganref.getSelection().get("ID"):"0",q=o.treeKunjungan.getSelection().length>0?o.treeKunjungan.getSelection()[0].get("ID"):"0",s=Ext.JSON.decode(r.get("REPORT_PARAMS")),m=o.doctype.getDocType();t.PARAMETER.RUANGAN=q;t.PARAMETER.LAPORAN=n;t.PARAMETER.CARABAYAR=p;s=Ext.apply(s,t);s=Ext.apply(s,m);s.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",r.get("DESKRIPSI"),s,true);o.kunjunganView.deselect(l)}});Ext.define("laporan.layanan.DataView",{extend:"Ext.view.View",alias:"widget.layanan-data-view",viewModel:{type:"layananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.layanan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.layananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}});Ext.define("laporan.layanan.Workspace",{extend:"com.Form",xtype:"workspace-laporan-layanan",controller:"workspace-laporan-layanan",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"tindakan-combo",height:30,emptyText:"[Tindakan]",reference:"tindakanref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeLayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}},border:false,reference:"layananView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.layanan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-layanan",onAfterRender:function(){var b=this.getReferences();b.layananView.load();b.treeLayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeLayanan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeLayanan.loadStore()},onSelectReport:function(m,u,n){var q=this.getReferences(),x=q.filter.getParameters(),p=q.ruanganref.getSelection()?q.ruanganref.getSelection().get("ID"):"0",s=q.carabayar.getSelection()?q.carabayar.getSelection().get("ID"):"0",w=q.dokterref.getSelection()?q.dokterref.getSelection().get("ID"):"0",r=q.tindakanref.getSelection()?q.tindakanref.getSelection().get("ID"):"0",t=q.treeLayanan.getSelection().length>0?q.treeLayanan.getSelection()[0].get("ID"):"0",v=Ext.JSON.decode(u.get("REPORT_PARAMS")),o=q.doctype.getDocType();x.PARAMETER.RUANGAN=t;x.PARAMETER.LAPORAN=p;x.PARAMETER.CARABAYAR=s;x.PARAMETER.DOKTER=w;x.PARAMETER.TINDAKAN=r;v=Ext.apply(v,x);v=Ext.apply(v,o);v.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",u.get("DESKRIPSI"),v,true);q.layananView.deselect(n)}});Ext.define("laporan.monitoring.DataView",{extend:"Ext.view.View",alias:"widget.monitoring-pelayanan-data-view",viewModel:{type:"monitoringpelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.monitoring.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.monitoringpelayananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}});Ext.define("laporan.monitoring.Workspace",{extend:"com.Form",xtype:"workspace-monitoring-pelayanan",controller:"workspace-monitoring-pelayanan",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"combobox",reference:"statuslayanan",store:Ext.create("Ext.data.Store",{fields:["ID","NAME"],data:[{ID:"1",NAME:"Belum Diterima / Final"},{ID:"2",NAME:"Sudah Diterima / Final"}]}),queryMode:"local",displayField:"NAME",valueField:"ID",height:30,emptyText:"[Status]"},{xtype:"ruangan-combo",reference:"ruanganref",params:{JENIS:5},firstLoad:true,height:30,emptyText:"[Ruangan]",name:"RUANGAN",listeners:{select:"onSelectRuangan",specialkey:"onFocusEnter"}},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"monitoring-pelayanan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}},border:false,reference:"monitoringView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.monitoring.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-monitoring-pelayanan",onAfterRender:function(){var c=this,b=c.getReferences(),a=c.getView();b.monitoringView.load();b.ruanganref.load();b.statuslayanan.setValue(1)},onFocusEnter:function(a,b){if(b.getKey()===b.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(b,a){this.getView().fireEvent("select",a,1)},onSelectReport:function(j,h){var b=this.getReferences(),c=b.filter.getParameters(),i=b.statuslayanan.getSelection()?b.statuslayanan.getSelection().get("ID"):"",g=b.ruanganref.getSelection(),f=g?g.get("ID"):"",l=Ext.JSON.decode(h.get("REPORT_PARAMS")),k=b.doctype.getDocType();c.PARAMETER.PSTATUS=i;c.PARAMETER.RUANGAN=f;l=Ext.apply(l,c);l=Ext.apply(l,k);l.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",h.get("DESKRIPSI"),l,true);b.monitoringView.deselect(h)}});Ext.define("laporan.pendapatan.DataView",{extend:"Ext.view.View",alias:"widget.pendapatan-data-view",viewModel:{type:"pendapatanmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.pendapatan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.pendapatanmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}});Ext.define("laporan.pendapatan.Workspace",{extend:"com.Form",xtype:"workspace-laporan-pendapatan",controller:"workspace-laporan-pendapatan",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treePendapatan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}},border:false,reference:"pendapatanView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.pendapatan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-pendapatan",onAfterRender:function(){var b=this.getReferences();b.pendapatanView.load();b.treePendapatan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treePendapatan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treePendapatan.loadStore()},onSelectReport:function(g,o,l){var p=this,d=p.getReferences(),f=d.filter.getParameters(),a=d.carabayar.getSelection()?d.carabayar.getSelection().get("ID"):"0",r=d.ruanganref.getSelection()?d.ruanganref.getSelection().get("ID"):"0",n=d.treePendapatan.getSelection(),k=n.length>0?n[0].get("ID"):1,q=Ext.JSON.decode(o.get("REPORT_PARAMS")),m=d.doctype.getDocType();f.PARAMETER.CARABAYAR=a;f.PARAMETER.RUANGAN=k;f.PARAMETER.LAPORAN=r;q=Ext.apply(q,f);q=Ext.apply(q,m);q.ALLOW_DOWNLOAD=true;p.getView().fireEvent("requestreport",o.get("DESKRIPSI"),q,true);d.pendapatanView.deselect(l)}});Ext.define("laporan.penerimaankasir.Workspace",{extend:"com.Form",xtype:"workspace-laporan-penerimaan-kasir",controller:"workspace-laporan-penerimaan-kasir",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"referensi-combo",params:{JENIS:10,STATUS:1},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"transaksi-kasir-list",reference:"transaksikasirlist",multiSelect:true,flex:1},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"14",STATUS:1}}}},border:false,reference:"penerimaanKasirView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.penerimaankasir.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-penerimaan-kasir",onAfterRender:function(){var d=this,a=d.getView(),b=d.getReferences(),c=a.app.xpriv("1209");b.transaksikasirlist.setGridConfig({paging:true,filter:{enabled:c,kasir:c}});b.penerimaanKasirView.load()},onSelectReport:function(l,c,j){var d=this,h=d.getView(),g=this.getReferences(),f=g.transaksikasirlist.getSelection(),a=g.carabayar.getSelection()?g.carabayar.getSelection().get("ID"):"0",b={PARAMETER:{}},k=Ext.JSON.decode(c.get("REPORT_PARAMS")),i=g.doctype.getDocType();b.PARAMETER.CARABAYAR=a;b.PARAMETER.KASIR=h.app.usrid;if(Ext.isArray(f)){b.PARAMETER.NOMOR="";Ext.Array.each(f,function(n,m){b.PARAMETER.NOMOR+="'"+n.get("NOMOR");b.PARAMETER.KASIR=n.get("KASIR");if(m<(f.length-1)){b.PARAMETER.NOMOR+="',"}else{b.PARAMETER.NOMOR+="'"}})}k=Ext.apply(k,b);k=Ext.apply(k,i);k.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",c.get("DESKRIPSI"),k,false);g.penerimaanKasirView.deselect(j)}});Ext.define("laporan.pengunjung.DataView",{extend:"Ext.view.View",alias:"widget.pengunjung-data-view",viewModel:{type:"pengunjungmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.pengunjung.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.pengunjungmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}});Ext.define("laporan.pengunjung.Workspace",{extend:"com.Form",xtype:"workspace-laporan-pengunjung",controller:"workspace-laporan-pengunjung",layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",border:false,defaults:{margin:5},layout:{type:"vbox",align:"stretch"},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelectRuangan"},doAfterLoad:function(b,d,a){Ext.Array.each(b,function(c){if(c.get("ID")==0){a.remove(c)}})}},{xtype:"ruangan-tree",reference:"treePengunjung",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}},border:false,reference:"pengunjungView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.pengunjung.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-pengunjung",onAfterRender:function(){var b=this.getReferences();b.pengunjungView.load();b.treePengunjung.setParams({JENIS_KUNJUNGAN:999})},onSelectRuangan:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treePengunjung.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treePengunjung.loadStore()},onSelectReport:function(k,r,l){var o=this.getReferences(),t=o.filter.getParameters(),p=o.carabayar.getSelection()?o.carabayar.getSelection().get("ID"):"0",n=o.ruanganref.getSelection()?o.ruanganref.getSelection().get("ID"):"0",q=o.treePengunjung.getSelection().length>0?o.treePengunjung.getSelection()[0].get("ID"):"0",s=Ext.JSON.decode(r.get("REPORT_PARAMS")),m=o.doctype.getDocType();t.PARAMETER.RUANGAN=q;t.PARAMETER.LAPORAN=n;t.PARAMETER.CARABAYAR=p;s=Ext.apply(s,t);s=Ext.apply(s,m);s.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",r.get("DESKRIPSI"),s,true);o.pengunjungView.deselect(l)}});Ext.define("laporan.rekammedis.DataView",{extend:"Ext.view.View",alias:"widget.rekammedis-data-view",viewModel:{type:"rekammedismodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.rekammedis.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.rekammedismodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}});Ext.define("laporan.rekammedis.Workspace",{extend:"com.Form",xtype:"workspace-laporan-rekammedis",controller:"workspace-laporan-rekammedis",viewModel:{stores:{diagnosastore:{type:"diagnosa-store",queryParams:{ICD:1}}}},layout:"border",cls:"x-br-top",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"combobox",emptyText:"[Kode ICD-Deskripsi]",bind:{store:"{diagnosastore}"},hideTrigger:true,reference:"kodeicdref",typeAhead:true,queryParam:"QUERY",displayField:"STR",valueField:"CODE",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item"><strong>{CODE}</strong> - {STR}</div>',"</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{CODE} - {STR}","</tpl>"),listeners:{focus:"onBeforeQuery"}},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(b,d,a){Ext.Array.each(b,function(c){if(c.get("ID")==0||c.get("ID")==8||c.get("ID")==11||c.get("ID")==7||c.get("ID")==10||c.get("ID")==12||c.get("ID")==6||c.get("ID")==4||c.get("ID")==9||c.get("ID")==5){a.remove(e)}})}},{xtype:"numberfield",reference:"limitref",value:0,minValue:0,emptyText:"[Limit]"},{xtype:"checkbox",reference:"utamaref",inputValue:1,uncheckedValue:0,boxLabel:"Primary",id:"utama"},{xtype:"ruangan-tree",reference:"treeRekamMedis",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}},border:false,reference:"rekamMedisView",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.rekammedis.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-rekammedis",onAfterRender:function(){var a=this.getReferences();a.rekamMedisView.load();a.treeRekamMedis.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(d,h){var g=this,i=g.getViewModel(),f=g.getReferences();f.treeRekamMedis.setParams({JENIS_KUNJUNGAN:h.get("ID")});f.treeRekamMedis.loadStore()},onSelectReport:function(f,o,h){var b=this.getReferences(),d=b.filter.getParameters(),p=b.carabayarref.getSelection()?b.carabayarref.getSelection().get("ID"):"0",k=b.carakeluarrref.getSelection()?b.carakeluarrref.getSelection().get("ID"):"0",a=b.kodeicdref.getSelection()?b.kodeicdref.getSelection().get("CODE"):"0",n=b.limitref.getValue()?b.limitref.getValue():0,m=b.utamaref.getValue()?1:0,g=b.ruanganref.getSelection()?b.ruanganref.getSelection().get("ID"):"0",l=b.treeRekamMedis.getSelection().length>0?b.treeRekamMedis.getSelection()[0].get("ID"):"0",r=Ext.JSON.decode(o.get("REPORT_PARAMS")),q=b.doctype.getDocType();d.PARAMETER.CARAKELUAR=k;d.PARAMETER.RUANGAN=l;d.PARAMETER.LAPORAN=g;d.PARAMETER.CARABAYAR=p;d.PARAMETER.KODEICD=a;d.PARAMETER.UTAMA=m;d.PARAMETER.LMT=n;r=Ext.apply(r,d);r=Ext.apply(r,q);r.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",o.get("DESKRIPSI"),r,true);b.rekamMedisView.deselect(h)},onBeforeQuery:function(b){if(b.combo){b.combo.getStore().removeAll()}}});Ext.define("laporan.rl.DataView",{extend:"Ext.view.View",alias:"widget.rl-data-view",viewModel:{type:"rlmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>','<div class="thumb-title-small">keterangan: {KETERANGAN}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.rl.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.rlmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"10",STATUS:1}}}});Ext.define("laporan.rl.Workspace",{extend:"com.Form",xtype:"workspace-laporan-rl",controller:"workspace-laporan-rl",layout:"border",cls:"x-br-top  x-br-right",border:false,items:[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"segmentedbutton",reference:"jenis",items:[{text:"Kemkes",iconCls:"simpel-kemkes",inputValue:"1001",pressed:true},{text:"Dinkes",inputValue:"1002"}],listeners:{toggle:"onToggleJenis"}},{xtype:"laporan-filter",reference:"filter"},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"1001",STATUS:1}}}},border:false,reference:"rlview",listeners:{select:"onSelectReport"}}],listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.rl.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-rl",onAfterRender:function(){var a=this.getReferences();a.rlview.load()},onSelectReport:function(b,k,d){var f=this.getReferences(),a=this.getView(),h=f.filter.getParameters(),c=Ext.JSON.decode(k.get("REPORT_PARAMS")),g=f.doctype.getDocType();c=Ext.apply(c,h);c=Ext.apply(c,g);c.ALLOW_DOWNLOAD=true;a.fireEvent("requestreport",k.get("DESKRIPSI"),c,true);f.rlview.deselect(d)},onToggleJenis:function(g,b,f){var d=this.getReferences(),a=d.rlview.getStore();if(a){a.setQueryParams({JENIS:b.inputValue,STATUS:1});d.rlview.load()}}});